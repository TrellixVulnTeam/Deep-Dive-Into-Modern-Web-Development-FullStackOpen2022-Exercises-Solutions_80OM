{"ast":null,"code":"import _slicedToArray from\"C:/Users/Samim Qeya/Documents/Workspace/Full Stack Open 2022/part-2/thephonebook/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from'react';import objectsEquality from'../objectsEquality';import List from\"./List\";import Input from\"./Input\";import Heading2 from\"./Heading2\";import personsService from\"../services/persons\";import Message from'./Message';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),newName=_useState4[0],setNewName=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),newNumber=_useState6[0],setNewNumber=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),inputText=_useState8[0],setInputText=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),message=_useState10[0],setMessage=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),messageType=_useState12[0],setMessageType=_useState12[1];var hook=function hook(){personsService.getPersons().then(function(intialPersons){setPersons(intialPersons);});};useEffect(hook,[]);var addName=function addName(event){event.preventDefault();var newPerson={name:newName,number:newNumber};console.log(\"Hi\");var personInList=persons.find(function(person){return objectsEquality(person.name,newPerson.name);});if(personInList){var options=confirm(\"\".concat(newPerson.name,\" is already added to phonebook, replace the old number with a new one?\"));if(options){personsService.updatePerson(personInList.id,newPerson).then(function(returnedPerson){setPersons(persons.map(function(person){return person.name===newPerson.name?returnedPerson:person;}));setMessage(\"\".concat(personInList.name,\"'s number was successfully changed.\"));setMessageType(\"success\");}).catch(function(message){setMessage(\"Information of \".concat(personInList.name,\" has already been removed from server.\"));setMessageType(\"error\");setPersons(persons.filter(function(p){return p.id!==personInList.id;}));});}}else{personsService.createPerson(newPerson).then(function(intialPersons){setPersons(persons.concat(intialPersons));setMessage(\"\".concat(intialPersons.name,\" was successfully added.\"));setMessageType(\"success\");}).catch(function(error){setMessage(error.response.data.error);setMessageType(\"error\");});}setTimeout(function(){setMessage(null);},5000);setNewName('');setNewNumber('');};var handlePersonChange=function handlePersonChange(event){setNewName(event.target.value);};var handleNumberChange=function handleNumberChange(event){setNewNumber(event.target.value);};var handleFilter=function handleFilter(event){var lowerCaseInput=event.target.value.toLowerCase();setInputText(lowerCaseInput);};var handleDelete=function handleDelete(id,name){var option=confirm(\"Delete \".concat(name,\"?\"));if(option){personsService.deletePerson(id).then(function(){setPersons(function(prevValue){return prevValue.filter(function(data){return data.id!==id;});});});}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Heading2,{text:\"Phonebook\"}),!message||/*#__PURE__*/_jsx(Message,{message:message,messageType:messageType}),/*#__PURE__*/_jsxs(\"div\",{children:[\"filter shown with \",/*#__PURE__*/_jsx(\"input\",{onChange:handleFilter})]}),/*#__PURE__*/_jsx(Heading2,{text:\"Add a new\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:addName,children:[/*#__PURE__*/_jsx(Input,{text:\"name:\",value:newName,onChange:handlePersonChange}),/*#__PURE__*/_jsx(Input,{text:\"number:\",value:newNumber,onChange:handleNumberChange}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"add\"})]}),/*#__PURE__*/_jsx(Heading2,{text:\"Numbers\"}),/*#__PURE__*/_jsx(List,{data:persons,inputText:inputText,onClick:handleDelete})]});};export default App;","map":{"version":3,"names":["useEffect","useState","objectsEquality","List","Input","Heading2","personsService","Message","App","persons","setPersons","newName","setNewName","newNumber","setNewNumber","inputText","setInputText","message","setMessage","messageType","setMessageType","hook","getPersons","then","intialPersons","addName","event","preventDefault","newPerson","name","number","console","log","personInList","find","person","options","confirm","updatePerson","id","returnedPerson","map","catch","filter","p","createPerson","concat","error","response","data","setTimeout","handlePersonChange","target","value","handleNumberChange","handleFilter","lowerCaseInput","toLowerCase","handleDelete","option","deletePerson","prevValue"],"sources":["C:/Users/Samim Qeya/Documents/Workspace/Full Stack Open 2022/part-2/thephonebook/src/components/App.jsx"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport objectsEquality from '../objectsEquality';\r\nimport List from \"./List\";\r\nimport Input from \"./Input\";\r\nimport Heading2 from \"./Heading2\";\r\nimport personsService from \"../services/persons\";\r\nimport Message from './Message';\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]);\r\n  const [newName, setNewName] = useState(\"\");\r\n  const [newNumber, setNewNumber] = useState(\"\");\r\n  const [inputText, setInputText] = useState(\"\");\r\n  const [message, setMessage] = useState(\"\");\r\n  const [messageType, setMessageType] = useState(\"\");\r\n\r\n  const hook = () => {\r\n    personsService\r\n      .getPersons()\r\n      .then(intialPersons => {\r\n        setPersons(intialPersons);\r\n      });\r\n  }\r\n\r\n  useEffect(hook, []);\r\n\r\n  const addName = (event) => {\r\n    event.preventDefault();\r\n\r\n    const newPerson = {\r\n        name: newName,\r\n        number: newNumber\r\n    }\r\n\r\n    console.log(\"Hi\");\r\n\r\n    const personInList = persons.find(person => objectsEquality(person.name, newPerson.name));\r\n    \r\n    if (personInList) {\r\n      const options = confirm(`${newPerson.name} is already added to phonebook, replace the old number with a new one?`);\r\n      if (options) {\r\n        personsService\r\n          .updatePerson(personInList.id, newPerson)\r\n          .then(returnedPerson => {\r\n            setPersons(persons.map(person => person.name === newPerson.name ? returnedPerson : person));\r\n            setMessage(`${personInList.name}'s number was successfully changed.`);\r\n            setMessageType(\"success\");\r\n          })\r\n          .catch(message => {\r\n            setMessage(`Information of ${personInList.name} has already been removed from server.`);\r\n            setMessageType(\"error\");\r\n            setPersons(persons.filter(p => p.id !== personInList.id))\r\n          })\r\n      }\r\n    } else {\r\n        personsService\r\n          .createPerson(newPerson)\r\n          .then(intialPersons => {\r\n            setPersons(persons.concat(intialPersons));\r\n            setMessage(`${intialPersons.name} was successfully added.`);\r\n            setMessageType(\"success\");\r\n          })\r\n          .catch(error => {\r\n            setMessage(error.response.data.error);\r\n            setMessageType(\"error\");\r\n          })\r\n    }\r\n    setTimeout(() => {\r\n      setMessage(null);\r\n    }, 5000);\r\n    setNewName('');\r\n    setNewNumber('');\r\n  }\r\n\r\n  const handlePersonChange = (event) => {\r\n    setNewName(event.target.value);\r\n  }\r\n\r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value);\r\n  }\r\n\r\n  const handleFilter = (event) => {\r\n    const lowerCaseInput = event.target.value.toLowerCase();\r\n    setInputText(lowerCaseInput);\r\n  }\r\n\r\n  const handleDelete = (id, name) => {\r\n    const option = confirm(`Delete ${name}?`);\r\n    if (option) {\r\n      personsService\r\n        .deletePerson(id)\r\n        .then(() => {\r\n          setPersons(prevValue => {\r\n            return prevValue.filter(data => data.id !== id);\r\n          })\r\n        })\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Heading2 text=\"Phonebook\" />\r\n      {!message || <Message message={message} messageType={messageType} />}\r\n      <div>\r\n          filter shown with <input onChange={handleFilter}/>\r\n      </div>\r\n      <Heading2 text=\"Add a new\" />\r\n      <form onSubmit={addName}>\r\n        <Input text=\"name:\" value={newName} onChange={handlePersonChange} />\r\n        <Input text=\"number:\" value={newNumber} onChange={handleNumberChange} />\r\n        <button type=\"submit\">add</button>\r\n      </form>\r\n      <Heading2 text=\"Numbers\" />\r\n      <List data={persons} inputText={inputText} onClick={handleDelete}/>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App"],"mappings":"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"},"metadata":{},"sourceType":"module"}